{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gerbe\\\\Source\\\\Repos\\\\MapboxData\\\\final-project\\\\src\\\\components\\\\Map.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\n\nimport Key from \"../img/key.png\";\nimport Schema from \"../img/data_schema.png\";\nimport Filter from \"./Filter\";\nimport bar from \"../img/filter.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = 'pk.eyJ1IjoiaXNhYWt0cmVhdHkiLCJhIjoiY2t1Mzhta2xnMW00MzJvczhmNzAxYmFmMyJ9.H05SHwWlCus6O_MBcXFnUQ';\nexport default function Map() {\n  _s();\n\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [lng, setLng] = useState(-99.0000);\n  const [lat, setLat] = useState(38.0000);\n  const [zoom, setZoom] = useState(4.00);\n  var lowestMag = 0;\n  var mapFilter = ['>=', 'mag', lowestMag]; // Initializes Map\n\n  useEffect(() => {\n    if (map.current) return; // initialize map only once\n\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/navigation-night-v1',\n      center: [lng, lat],\n      zoom: zoom\n    });\n  }); // Stores Coordinates\n\n  useEffect(() => {\n    if (!map.current) return; // wait for map to initialize\n\n    map.current.on('load', () => {\n      // Add a geojson point source.\n      // Heatmap layers also work with a vector tile source.\n      map.current.addSource('earthquakes', {\n        'type': 'geojson',\n        'data': 'https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson'\n      });\n      map.current.addLayer({\n        'id': 'sky',\n        'type': 'sky',\n        'paint': {\n          'sky-opacity': ['interpolate', ['linear'], ['zoom'], 0, 0, 5, 0.3, 8, 1],\n          // set up the sky layer for atmospheric scattering\n          'sky-type': 'atmosphere',\n          // explicitly set the position of the sun rather than allowing the sun to be attached to the main light source\n          // 'sky-atmosphere-sun': getSunPosition(),\n          // set the intensity of the sun as a light source (0-100 with higher values corresponding to brighter skies)\n          'sky-atmosphere-sun-intensity': 5\n        }\n      }); // Used for map layering... static, shouldn't ever need to be touched\n\n      const layers = map.current.getStyle().layers;\n      const labelLayerId = layers.find(layer => layer.type === 'symbol' && layer.layout['text-field']).id; // 3D Buildings\n\n      map.current.addLayer({\n        'id': 'add-3d-buildings',\n        'source': 'composite',\n        'source-layer': 'building',\n        'filter': ['==', 'extrude', 'true'],\n        'type': 'fill-extrusion',\n        'minzoom': 15,\n        'paint': {\n          'fill-extrusion-color': '#aaa',\n          'fill-extrusion-height': ['interpolate', ['linear'], ['zoom'], 15, 0, 15.05, ['get', 'height']],\n          'fill-extrusion-base': ['interpolate', ['linear'], ['zoom'], 15, 0, 15.05, ['get', 'min_height']],\n          'fill-extrusion-opacity': 0.6\n        }\n      }, labelLayerId); // Heatmap\n\n      map.current.addLayer({\n        'id': 'earthquakes-heat',\n        'type': 'heatmap',\n        'source': 'earthquakes',\n        'maxzoom': 9,\n        'paint': {\n          // Increase the heatmap weight based on frequency and property magnitude\n          'heatmap-weight': ['interpolate', ['linear'], ['get', 'mag'], 0, 0, 6, 1],\n          // Increase the heatmap color weight weight by zoom level\n          // heatmap-intensity is a multiplier on top of heatmap-weight\n          'heatmap-intensity': ['interpolate', ['linear'], ['zoom'], 0, 1, 9, 3],\n          // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n          // Begin color ramp at 0-stop with a 0-transparancy color\n          // to create a blur-like effect.\n          'heatmap-color': ['interpolate', ['linear'], ['heatmap-density'], 0, 'rgba(33,102,172,0)', 0.2, 'rgb(103,169,207)', 0.4, 'rgb(209,229,240)', 0.6, 'rgb(253,219,199)', 0.8, 'rgb(239,138,98)', 1, 'rgb(178,24,43)'],\n          // Adjust the heatmap radius by zoom level\n          'heatmap-radius': ['interpolate', ['linear'], ['zoom'], 0, 2, 9, 20],\n          // Transition from heatmap to circle layer by zoom level\n          'heatmap-opacity': ['interpolate', ['linear'], ['zoom'], 7, 1, 9, 0]\n        }\n      }, 'waterway-label');\n      map.current.addLayer({\n        'id': 'earthquakes-point',\n        'type': 'circle',\n        'source': 'earthquakes',\n        'minzoom': 7,\n        'filter': mapFilter,\n        'paint': {\n          // Size circle radius by earthquake magnitude and zoom level\n          'circle-radius': ['interpolate', ['linear'], ['zoom'], 7, ['interpolate', ['linear'], ['get', 'mag'], 1, 1, 6, 4], 16, ['interpolate', ['linear'], ['get', 'mag'], 1, 5, 6, 50]],\n          // Color circle by earthquake magnitude\n          'circle-color': ['interpolate', ['linear'], ['get', 'mag'], 1, 'rgba(33,102,172,0)', 2, 'rgb(103,169,207)', 3, 'rgb(209,229,240)', 4, 'rgb(253,219,199)', 5, 'rgb(239,138,98)', 6, 'rgb(178,24,43)'],\n          'circle-stroke-color': 'white',\n          'circle-stroke-width': 1,\n          // Transition from heatmap to circle layer by zoom level\n          'circle-opacity': ['interpolate', ['linear'], ['zoom'], 7, 0, 8, 1]\n        }\n      }, 'waterway-label');\n    }); // Adds moving map functionality\n\n    map.current.on('move', () => {\n      setLng(map.current.getCenter().lng.toFixed(4));\n      setLat(map.current.getCenter().lat.toFixed(4));\n      setZoom(map.current.getZoom().toFixed(2));\n    });\n    map.current.on('click', 'earthquakes-point', e => {\n      // Copy coordinates array.\n      const coordinates = e.features[0].geometry.coordinates.slice();\n      const magnitude = e.features[0].properties.mag;\n      const Tsunami = e.features[0].properties.tsunami;\n      new mapboxgl.Popup().setLngLat(coordinates).setHTML(\"<h3>Magnitude: <h3>\" + magnitude + \"<h1></h1>\" + \"<h3>Tsunami: <h3>\" + (Tsunami === 0 ? \"<h3>No\" : \"<h3>Yes\")).addTo(map.current);\n    });\n    map.current.on('mouseenter', 'earthquakes-point', () => {\n      map.current.getCanvas().style.cursor = 'pointer';\n    }); // Change it back to a pointer when it leaves.\n\n    map.current.on('mouseleave', 'earthquakes-point', () => {\n      map.current.getCanvas().style.cursor = '';\n    });\n\n    document.getElementById('filterBtn').onclick = function () {\n      addFilter('>', 'mag', 3);\n    };\n  });\n\n  function addFilter(symbol, param, value) {\n    map.current.setFilter('earthquakes-point', [symbol, param, value]);\n    map.current.setFilter('earthquakes-heat', [symbol, param, value]);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar\",\n      children: [\"Longitude: \", lng, \" | Latitude: \", lat, \" | Zoom: \", zoom]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"key\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: Key,\n        alt: \"Key\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"key-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"1.0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"6.0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter\",\n      children: [\"Filters\\\\n Enter Lowest Magnitude:\", /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"filterBtn\",\n        \"background-color\": \"transparent\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: bar,\n          alt: \"Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      className: \"map-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: Schema\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Map, \"TO/1vxu7JLaPLRGCkFdYOCVZ0mc=\");\n\n_c = Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"sources":["C:/Users/gerbe/Source/Repos/MapboxData/final-project/src/components/Map.js"],"names":["React","useRef","useEffect","useState","mapboxgl","Key","Schema","Filter","bar","accessToken","Map","mapContainer","map","lng","setLng","lat","setLat","zoom","setZoom","lowestMag","mapFilter","current","container","style","center","on","addSource","addLayer","layers","getStyle","labelLayerId","find","layer","type","layout","id","getCenter","toFixed","getZoom","e","coordinates","features","geometry","slice","magnitude","properties","mag","Tsunami","tsunami","Popup","setLngLat","setHTML","addTo","getCanvas","cursor","document","getElementById","onclick","addFilter","symbol","param","value","setFilter"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\r\n\r\nimport Key from \"../img/key.png\";\r\nimport Schema from \"../img/data_schema.png\";\r\nimport Filter from \"./Filter\";\r\nimport bar from \"../img/filter.png\"\r\n\r\nmapboxgl.accessToken = 'pk.eyJ1IjoiaXNhYWt0cmVhdHkiLCJhIjoiY2t1Mzhta2xnMW00MzJvczhmNzAxYmFmMyJ9.H05SHwWlCus6O_MBcXFnUQ';\r\n\r\nexport default function Map() {\r\n\r\n    const mapContainer = useRef(null);\r\n    const map = useRef(null);\r\n    const [lng, setLng] = useState(-99.0000);\r\n    const [lat, setLat] = useState(38.0000);\r\n    const [zoom, setZoom] = useState(4.00);\r\n\r\n    var lowestMag = 0;\r\n    var mapFilter = ['>=', 'mag', lowestMag];\r\n\r\n    // Initializes Map\r\n    useEffect(() => {\r\n        if (map.current) return; // initialize map only once\r\n        map.current = new mapboxgl.Map({\r\n          container: mapContainer.current,\r\n          style: 'mapbox://styles/mapbox/navigation-night-v1',\r\n          center: [lng, lat],\r\n          zoom: zoom\r\n        });\r\n      });\r\n\r\n    // Stores Coordinates\r\n    useEffect(() => {\r\n        if (!map.current) return; // wait for map to initialize\r\n        map.current.on('load', () => {\r\n          // Add a geojson point source.\r\n          // Heatmap layers also work with a vector tile source.\r\n          map.current.addSource('earthquakes', {\r\n          'type': 'geojson',\r\n          'data': 'https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson'\r\n          });\r\n\r\n          map.current.addLayer({\r\n            'id': 'sky',\r\n            'type': 'sky',\r\n            'paint': {\r\n            'sky-opacity': [\r\n            'interpolate',\r\n            ['linear'],\r\n            ['zoom'],\r\n            0,\r\n            0,\r\n            5,\r\n            0.3,\r\n            8,\r\n            1\r\n            ],\r\n            // set up the sky layer for atmospheric scattering\r\n            'sky-type': 'atmosphere',\r\n            // explicitly set the position of the sun rather than allowing the sun to be attached to the main light source\r\n            // 'sky-atmosphere-sun': getSunPosition(),\r\n            // set the intensity of the sun as a light source (0-100 with higher values corresponding to brighter skies)\r\n            'sky-atmosphere-sun-intensity': 5\r\n            }\r\n          });\r\n\r\n\r\n\r\n        // Used for map layering... static, shouldn't ever need to be touched\r\n        const layers = map.current.getStyle().layers;\r\n        const labelLayerId = layers.find(\r\n          (layer) => layer.type === 'symbol' && layer.layout['text-field']\r\n        ).id;\r\n        \r\n        // 3D Buildings\r\n        map.current.addLayer(\r\n        {\r\n            'id': 'add-3d-buildings',\r\n            'source': 'composite',\r\n            'source-layer': 'building',\r\n            'filter': ['==', 'extrude', 'true'],\r\n            'type': 'fill-extrusion',\r\n            'minzoom': 15,\r\n            'paint': {\r\n              'fill-extrusion-color': '#aaa',\r\n\r\n              'fill-extrusion-height': [\r\n                'interpolate',\r\n                ['linear'],\r\n                ['zoom'],\r\n                15,\r\n                0,\r\n                15.05,\r\n                ['get', 'height']\r\n              ],\r\n              'fill-extrusion-base': [\r\n                'interpolate',\r\n                ['linear'],\r\n                ['zoom'],\r\n                15,\r\n                0,\r\n                15.05,\r\n                ['get', 'min_height']\r\n              ],\r\n              'fill-extrusion-opacity': 0.6\r\n            }\r\n          },\r\n          labelLayerId\r\n        );\r\n\r\n        // Heatmap\r\n        map.current.addLayer(\r\n        {\r\n          'id': 'earthquakes-heat',\r\n          'type': 'heatmap',\r\n          'source': 'earthquakes',\r\n          'maxzoom': 9,\r\n          'paint': {\r\n          // Increase the heatmap weight based on frequency and property magnitude\r\n          'heatmap-weight': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['get', 'mag'],\r\n          0,\r\n          0,\r\n          6,\r\n          1\r\n          ],\r\n          // Increase the heatmap color weight weight by zoom level\r\n          // heatmap-intensity is a multiplier on top of heatmap-weight\r\n          'heatmap-intensity': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['zoom'],\r\n          0,\r\n          1,\r\n          9,\r\n          3\r\n          ],\r\n          // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\r\n          // Begin color ramp at 0-stop with a 0-transparancy color\r\n          // to create a blur-like effect.\r\n          'heatmap-color': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['heatmap-density'],\r\n          0,\r\n          'rgba(33,102,172,0)',\r\n          0.2,\r\n          'rgb(103,169,207)',\r\n          0.4,\r\n          'rgb(209,229,240)',\r\n          0.6,\r\n          'rgb(253,219,199)',\r\n          0.8,\r\n          'rgb(239,138,98)',\r\n          1,\r\n          'rgb(178,24,43)'\r\n          ],\r\n          // Adjust the heatmap radius by zoom level\r\n          'heatmap-radius': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['zoom'],\r\n          0,\r\n          2,\r\n          9,\r\n          20\r\n          ],\r\n          // Transition from heatmap to circle layer by zoom level\r\n          'heatmap-opacity': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['zoom'],\r\n          7,\r\n          1,\r\n          9,\r\n          0\r\n          ]\r\n          }\r\n          },\r\n          'waterway-label'\r\n          );\r\n           \r\n          map.current.addLayer(\r\n          {\r\n          'id': 'earthquakes-point',\r\n          'type': 'circle',\r\n          'source': 'earthquakes',\r\n          'minzoom': 7,\r\n          'filter': mapFilter,\r\n          'paint': {\r\n          // Size circle radius by earthquake magnitude and zoom level\r\n          'circle-radius': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['zoom'],\r\n          7,\r\n          ['interpolate', ['linear'], ['get', 'mag'], 1, 1, 6, 4],\r\n          16,\r\n          ['interpolate', ['linear'], ['get', 'mag'], 1, 5, 6, 50]\r\n          ],\r\n          // Color circle by earthquake magnitude\r\n          'circle-color': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['get', 'mag'],\r\n          1,\r\n          'rgba(33,102,172,0)',\r\n          2,\r\n          'rgb(103,169,207)',\r\n          3,\r\n          'rgb(209,229,240)',\r\n          4,\r\n          'rgb(253,219,199)',\r\n          5,\r\n          'rgb(239,138,98)',\r\n          6,\r\n          'rgb(178,24,43)'\r\n          ],\r\n          'circle-stroke-color': 'white',\r\n          'circle-stroke-width': 1,\r\n          // Transition from heatmap to circle layer by zoom level\r\n          'circle-opacity': [\r\n          'interpolate',\r\n          ['linear'],\r\n          ['zoom'],\r\n          7,\r\n          0,\r\n          8,\r\n          1\r\n          ]\r\n          }\r\n          },\r\n          'waterway-label'\r\n          );\r\n        });\r\n        \r\n        // Adds moving map functionality\r\n        map.current.on('move', () => {\r\n          setLng(map.current.getCenter().lng.toFixed(4));\r\n          setLat(map.current.getCenter().lat.toFixed(4));\r\n          setZoom(map.current.getZoom().toFixed(2));\r\n        });\r\n\r\n        map.current.on('click', 'earthquakes-point', (e) => {\r\n          // Copy coordinates array.\r\n          const coordinates = e.features[0].geometry.coordinates.slice();\r\n          const magnitude = e.features[0].properties.mag;\r\n          const Tsunami = e.features[0].properties.tsunami;\r\n          \r\n          new mapboxgl.Popup()\r\n            .setLngLat(coordinates)\r\n            .setHTML(\"<h3>Magnitude: <h3>\" + magnitude + \"<h1></h1>\" + \"<h3>Tsunami: <h3>\" + ( Tsunami === 0 ? \"<h3>No\" : \"<h3>Yes\" ) )\r\n            .addTo(map.current);\r\n        });\r\n\r\n        map.current.on('mouseenter', 'earthquakes-point', () => {\r\n          map.current.getCanvas().style.cursor = 'pointer';\r\n        });\r\n           \r\n          // Change it back to a pointer when it leaves.\r\n        map.current.on('mouseleave', 'earthquakes-point', () => {\r\n          map.current.getCanvas().style.cursor = '';\r\n        });\r\n\r\n        document.getElementById('filterBtn').onclick = function () {addFilter('>', 'mag', 3)}\r\n    });\r\n\r\n    function addFilter(symbol, param, value) {\r\n        map.current.setFilter('earthquakes-point', [symbol, param, value]);\r\n        map.current.setFilter('earthquakes-heat', [symbol, param, value]);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"sidebar\">\r\n                Longitude: {lng} | Latitude: {lat} | Zoom: {zoom}\r\n            </div>\r\n            <div className=\"key\">\r\n                <img src={Key} alt=\"Key\" />\r\n                <div className=\"key-text\">\r\n                    <p>1.0</p>\r\n                    <p>6.0</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"filter\">\r\n                Filters\\n\r\n                Enter Lowest Magnitude:\r\n                <button id=\"filterBtn\" background-color='transparent'>\r\n                    <img src={bar} alt=\"Filter\" />\r\n                </button>\r\n            </div>\r\n            <div ref={mapContainer} className=\"map-container\" />\r\n            <img src={Schema} />\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}